<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUTT | Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #fff; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); }
        input, select, textarea { background: #0f0f0f !important; border: 1px solid #222 !important; color: white !important; outline: none; transition: 0.3s; width: 100%; padding: 12px; border-radius: 8px; font-size: 13px; }
        input:focus, textarea:focus { border-color: #fff !important; }
        .size-btn { border: 1px solid #333; padding: 8px; border-radius: 6px; cursor: pointer; text-align: center; transition: 0.3s; font-weight: bold; font-size: 12px; }
        .size-btn.active { background: white; color: black; border-color: white; }
    </style>
</head>
<body class="min-h-screen">

    <div id="login-screen" class="fixed inset-0 z-[500] bg-black flex items-center justify-center p-6">
        <div class="w-full max-w-sm p-10 glass rounded-3xl text-center">
            <img src="https://i.ibb.co/Vp8pXQk/logo-mutt.png" class="w-24 mx-auto mb-8 grayscale invert">
            <input type="text" id="user" placeholder="Usuário" class="mb-4">
            <input type="password" id="pass" placeholder="Senha" class="mb-6">
            <button onclick="fazerLogin()" class="w-full bg-white text-black py-4 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-zinc-200 transition">Acessar Sistema</button>
            <p id="login-error" class="text-red-500 text-[10px] mt-4 hidden uppercase font-bold">Credenciais Incorretas</p>
        </div>
    </div>

    <div id="admin-panel" class="hidden flex min-h-screen">
        <main class="flex-1 p-8 md:p-12 max-w-7xl mx-auto">
            <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6">
                <div>
                    <h1 class="text-4xl font-black uppercase italic tracking-tighter">Gerenciar Stock</h1>
                    <p class="text-zinc-500 text-xs font-bold uppercase tracking-widest">Controle total da Mutt Streetwear</p>
                </div>
                <button onclick="abrirModal()" class="bg-white text-black px-8 py-4 rounded-full font-black text-[10px] uppercase tracking-widest hover:scale-105 transition">
                    + Adicionar Novo Item
                </button>
            </header>

            <div class="grid grid-cols-1 gap-3" id="lista-produtos-adm">
                </div>
        </main>
    </div>

    <div id="modal-produto" class="fixed inset-0 bg-black/95 z-[600] hidden items-center justify-center p-4 overflow-y-auto">
        <div class="w-full max-w-3xl glass p-8 md:p-12 rounded-[2rem] my-auto relative">
            <button onclick="fecharModal()" class="absolute top-8 right-8 text-3xl text-zinc-500 hover:text-white">&times;</button>
            <h2 id="modal-title" class="text-2xl font-black uppercase italic mb-8">Configurar Produto</h2>
            
            <form id="form-produto" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <input type="hidden" id="edit-id">
                
                <div class="md:col-span-2 text-zinc-500 text-[10px] font-black uppercase tracking-widest mb-[-15px]">Informações Básicas</div>
                
                <input type="text" id="p-nome" placeholder="Nome do Produto (Ex: Camiseta Oversized Black)" required>
                
                <select id="p-cat">
                    <option value="camisetas">Camisetas</option>
                    <option value="jaquetas">Jaquetas</option>
                    <option value="shorts">Shorts</option>
                    <option value="acessorios">Acessórios</option>
                    <option value="calcas">Calças</option>
                </select>

                <input type="number" step="0.01" id="p-preco" placeholder="Preço (Ex: 149.90)" required>
                
                <input type="text" id="p-img" placeholder="URL da Imagem Principal" required>

                <div class="md:col-span-2 text-zinc-500 text-[10px] font-black uppercase tracking-widest mb-[-15px]">Tamanhos Disponíveis (Clique para selecionar)</div>
                
                <div id="p-tamanhos" class="md:col-span-2 grid grid-cols-6 gap-2">
                    <div class="size-btn" data-size="P">P</div>
                    <div class="size-btn" data-size="M">M</div>
                    <div class="size-btn" data-size="G">G</div>
                    <div class="size-btn" data-size="GG">GG</div>
                    <div class="size-btn" data-size="38">38</div>
                    <div class="size-btn" data-size="40">40</div>
                    <div class="size-btn" data-size="42">42</div>
                    <div class="size-btn" data-size="44">44</div>
                    <div class="size-btn" data-size="UN">UN</div>
                </div>

                <div class="md:col-span-2 text-zinc-500 text-[10px] font-black uppercase tracking-widest mb-[-15px]">Descrição do Produto</div>
                <textarea id="p-desc" rows="4" placeholder="Descreva os detalhes, tecido, caimento..." class="md:col-span-2"></textarea>

                <button type="submit" class="md:col-span-2 bg-blue-600 text-white py-5 rounded-2xl font-black uppercase text-xs tracking-[0.3em] hover:bg-blue-500 transition shadow-lg shadow-blue-900/20">
                    Salvar no Inventário
                </button>
            </form>
        </div>
    </div>

    <script>
        // LOGIN
        function fazerLogin() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            if(u === 'admin123' && p === 'admin123') {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('admin-panel').classList.remove('hidden');
                renderAdmin();
            } else {
                document.getElementById('login-error').classList.remove('hidden');
            }
        }

        // SELEÇÃO DE TAMANHOS
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.onclick = () => btn.classList.toggle('active');
        });

        let db = JSON.parse(localStorage.getItem('mutt_products')) || [];

        function renderAdmin() {
            const container = document.getElementById('lista-produtos-adm');
            container.innerHTML = db.length === 0 ? '<p class="text-center py-20 text-zinc-700 font-bold uppercase text-xs tracking-widest">Estoque Vazio</p>' : 
            db.map(p => `
                <div class="glass p-5 rounded-2xl flex items-center justify-between group hover:border-zinc-700 transition">
                    <div class="flex items-center gap-5">
                        <img src="${p.img}" class="w-14 h-18 object-cover rounded-lg">
                        <div>
                            <h3 class="font-bold text-sm uppercase tracking-tighter">${p.nome}</h3>
                            <p class="text-[10px] text-zinc-500 uppercase">${p.cat} • R$ ${p.preco.toFixed(2)}</p>
                            <div class="flex gap-1 mt-1">${(p.tamanhos || []).map(t => `<span class="text-[8px] bg-zinc-800 px-1 rounded">${t}</span>`).join('')}</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="editarProduto(${p.id})" class="w-10 h-10 flex items-center justify-center rounded-full bg-zinc-900 hover:bg-white hover:text-black transition"><i class="fa-solid fa-pen text-xs"></i></button>
                        <button onclick="removerProduto(${p.id})" class="w-10 h-10 flex items-center justify-center rounded-full bg-zinc-900 hover:bg-red-600 transition"><i class="fa-solid fa-trash text-xs"></i></button>
                    </div>
                </div>
            `).join('');
        }

        function abrirModal() {
            document.getElementById('form-produto').reset();
            document.getElementById('edit-id').value = '';
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('modal-produto').classList.replace('hidden', 'flex');
        }

        function fecharModal() { document.getElementById('modal-produto').classList.replace('flex', 'hidden'); }

        document.getElementById('form-produto').onsubmit = function(e) {
            e.preventDefault();
            const id = document.getElementById('edit-id').value;
            const selecionados = Array.from(document.querySelectorAll('.size-btn.active')).map(b => b.dataset.size);

            const prod = {
                id: id ? parseInt(id) : Date.now(),
                nome: document.getElementById('p-nome').value,
                cat: document.getElementById('p-cat').value,
                preco: parseFloat(document.getElementById('p-preco').value),
                img: document.getElementById('p-img').value,
                desc: document.getElementById('p-desc').value,
                tamanhos: selecionados
            };

            if(id) {
                const idx = db.findIndex(x => x.id == id);
                db[idx] = prod;
            } else {
                db.push(prod);
            }

            localStorage.setItem('mutt_products', JSON.stringify(db));
            fecharModal();
            renderAdmin();
        };

        function removerProduto(id) {
            if(confirm("Excluir item?")) {
                db = db.filter(x => x.id !== id);
                localStorage.setItem('mutt_products', JSON.stringify(db));
                renderAdmin();
            }
        }

        function editarProduto(id) {
            const p = db.find(x => x.id === id);
            document.getElementById('edit-id').value = p.id;
            document.getElementById('p-nome').value = p.nome;
            document.getElementById('p-cat').value = p.cat;
            document.getElementById('p-preco').value = p.preco;
            document.getElementById('p-img').value = p.img;
            document.getElementById('p-desc').value = p.desc || '';
            
            document.querySelectorAll('.size-btn').forEach(b => {
                b.classList.toggle('active', (p.tamanhos || []).includes(b.dataset.size));
            });
            
            document.getElementById('modal-produto').classList.replace('hidden', 'flex');
        }
    </script>
</body>
</html>
