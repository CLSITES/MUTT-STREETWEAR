<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUTT | SHOPPING BAG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #000; color: #fff; }
        
        .input-mutt { 
            background: #0a0a0a; 
            border: 1px solid #1a1a1a; 
            color: white; 
            padding: 14px; 
            border-radius: 0px; 
            width: 100%; 
            font-size: 11px;
            font-weight: bold;
            outline: none;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .input-mutt:focus { border-color: #fff; }
        .step-title { font-weight: 900; text-transform: uppercase; font-style: italic; letter-spacing: -0.05em; font-size: 1.5rem; margin-bottom: 2rem; display: flex; align-items: center; gap: 12px; }
        
        input[type="radio"] { filter: invert(100%) hue-rotate(180deg) brightness(1.5); scale: 1.2; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

    <header class="border-b border-zinc-900 p-6 sticky top-0 bg-black/80 backdrop-blur-md z-50">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="w-16">
                <img src="https://i.postimg.cc/L5zZY3TJ/transparent-Photoroom-(2).png" alt="MUTT" class="w-full">
            </a>
            <span class="text-[9px] font-black uppercase tracking-[0.4em] text-zinc-500">Checkout Seguro • 256-bit SSL</span>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12 lg:py-20">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-20">
            
            <div class="lg:col-span-7 space-y-20">
                <section>
                    <h2 class="step-title"><span class="text-zinc-800 text-4xl">01</span> Sua Bag</h2>
                    <div id="cart-items-container" class="space-y-8"></div>
                </section>

                <section>
                    <h2 class="step-title"><span class="text-zinc-800 text-4xl">02</span> Entrega</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <input type="text" id="cep" placeholder="CEP" class="input-mutt">
                        <input type="text" id="numero" placeholder="NÚMERO" class="input-mutt">
                        <input type="text" id="rua" placeholder="ENDEREÇO COMPLETO" class="input-mutt md:col-span-2">
                        <input type="text" id="cidade" placeholder="CIDADE" class="input-mutt">
                        <input type="text" id="estado" placeholder="ESTADO (EX: SP, RJ, MG)" class="input-mutt" maxlength="2" oninput="calcularFrete()">
                    </div>
                    <p class="text-[9px] text-zinc-500 mt-2 uppercase font-bold">* Digite o estado para calcular o frete</p>
                </section>

                <section>
                    <h2 class="step-title"><span class="text-zinc-800 text-4xl">03</span> Pagamento</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="border border-zinc-800 p-6 flex items-center justify-between cursor-pointer hover:bg-zinc-900 transition group has-[:checked]:border-white">
                            <div class="flex items-center gap-4">
                                <input type="radio" name="pay" value="pix" class="accent-white" checked onchange="recalcularTudo()">
                                <div class="flex flex-col">
                                    <span class="text-[11px] font-black uppercase tracking-widest">PIX</span>
                                    <span class="text-[9px] text-green-500 font-bold uppercase">5% de Desconto</span>
                                </div>
                            </div>
                            <i class="fa-brands fa-pix text-zinc-700 group-hover:text-white"></i>
                        </label>

                        <label class="border border-zinc-800 p-6 flex items-center justify-between cursor-pointer hover:bg-zinc-900 transition group has-[:checked]:border-white">
                            <div class="flex items-center gap-4">
                                <input type="radio" name="pay" value="cartao" class="accent-white" onchange="recalcularTudo()">
                                <div class="flex flex-col">
                                    <span class="text-[11px] font-black uppercase tracking-widest text-zinc-400 group-hover:text-white">Cartão</span>
                                    <span class="text-[9px] text-zinc-600 font-bold uppercase">Em até 12x</span>
                                </div>
                            </div>
                            <i class="fa-solid fa-credit-card text-zinc-700 group-hover:text-white"></i>
                        </label>
                    </div>
                </section>
            </div>

            <div class="lg:col-span-5">
                <div class="sticky top-32 bg-zinc-950 border border-zinc-900 p-10 rounded-sm shadow-2xl">
                    <h2 class="text-[10px] font-black uppercase tracking-[0.4em] mb-10 border-b border-zinc-900 pb-5 text-zinc-400 italic">Order Summary</h2>
                    
                    <div class="space-y-5 mb-10">
                        <div class="flex justify-between text-sm">
                            <span class="text-zinc-500 uppercase font-black text-[9px] tracking-widest">Subtotal</span>
                            <span id="subtotal" class="font-bold tracking-tighter">R$ 0,00</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-zinc-500 uppercase font-black text-[9px] tracking-widest">Frete (<span id="uf-display">--</span>)</span>
                            <span id="frete-valor" class="font-bold tracking-tighter">R$ 0,00</span>
                        </div>
                        <div id="desc-pix-row" class="flex justify-between text-sm hidden">
                            <span class="text-green-500 uppercase font-black text-[9px] tracking-widest">Desc. Pix (5%)</span>
                            <span id="pix-discount" class="text-green-500 font-bold tracking-tighter">- R$ 0,00</span>
                        </div>
                        <div class="h-[1px] bg-zinc-900 my-6"></div>
                        <div class="flex justify-between items-end">
                            <span class="font-black uppercase italic tracking-tighter text-2xl">Total</span>
                            <span id="total" class="text-4xl font-black italic tracking-tighter">R$ 0,00</span>
                        </div>
                    </div>

                    <button onclick="finalizarPedido()" class="w-full bg-white text-black py-6 font-black uppercase text-[11px] tracking-[0.3em] hover:bg-zinc-200 transition-all hover:tracking-[0.4em]">
                        Finalizar Pedido
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // ==========================================
        // TABELA DE FRETE - MUDE OS VALORES ABAIXO
        // ==========================================
        const TABELA_FRETE = {
            "SP": 15.00,
            "RJ": 22.00,
            "MG": 20.00,
            "ES": 25.00,
            "PR": 28.00,
            "SC": 28.00,
            "RS": 30.00,
            "DF": 25.00,
            "GO": 35.00,
            "BA": 40.00,
            "PE": 45.00,
            "CE": 45.00,
            "OUTROS": 55.00 // Valor para estados não listados
        };

        let carrinho = JSON.parse(localStorage.getItem('mutt_cart')) || [];
        let valorFreteAtual = 0;

        function renderCarrinho() {
            const container = document.getElementById('cart-items-container');
            let subtotal = 0;

            if(carrinho.length === 0) {
                container.innerHTML = `<div class="py-20 text-center border border-zinc-900 uppercase text-[10px] font-black tracking-widest text-zinc-500">Bag Vazia</div>`;
                atualizarResumo(0);
                return;
            }

            container.innerHTML = carrinho.map((item, index) => {
                subtotal += item.preco;
                const imagem = item.imgs ? item.imgs[0] : (item.img || '');
                return `
                    <div class="flex gap-8 border-b border-zinc-900 pb-8 items-start group">
                        <div class="w-24 h-32 bg-zinc-900 overflow-hidden border border-zinc-800">
                            <img src="${imagem}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between">
                                <h3 class="text-sm font-black uppercase italic tracking-tighter">${item.nome}</h3>
                                <button onclick="removerItem(${index})" class="text-zinc-800 hover:text-white"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                            <p class="text-[9px] text-zinc-500 font-black uppercase mt-2">Tam: ${item.tamanho}</p>
                            <p class="text-sm font-black italic mt-8">R$ ${item.preco.toFixed(2)}</p>
                        </div>
                    </div>
                `;
            }).join('');

            atualizarResumo(subtotal);
        }

        function calcularFrete() {
            const uf = document.getElementById('estado').value.toUpperCase().trim();
            document.getElementById('uf-display').innerText = uf || "--";
            
            if (uf.length === 2) {
                valorFreteAtual = TABELA_FRETE[uf] || TABELA_FRETE["OUTROS"];
            } else {
                valorFreteAtual = 0;
            }
            recalcularTudo();
        }

        function recalcularTudo() {
            let subtotal = carrinho.reduce((acc, item) => acc + item.preco, 0);
            atualizarResumo(subtotal);
        }

        function atualizarResumo(subtotal) {
            const metodo = document.querySelector('input[name="pay"]:checked').value;
            const descRow = document.getElementById('desc-pix-row');
            
            let desconto = 0;
            if (metodo === 'pix' && subtotal > 0) {
                desconto = subtotal * 0.05;
                descRow.classList.remove('hidden');
                document.getElementById('pix-discount').innerText = `- R$ ${desconto.toFixed(2)}`;
            } else {
                descRow.classList.add('hidden');
            }

            const totalFinal = (subtotal + valorFreteAtual) - desconto;

            document.getElementById('subtotal').innerText = `R$ ${subtotal.toFixed(2)}`;
            document.getElementById('frete-valor').innerText = `R$ ${valorFreteAtual.toFixed(2)}`;
            document.getElementById('total').innerText = `R$ ${totalFinal.toFixed(2)}`;
        }

        function removerItem(index) {
            carrinho.splice(index, 1);
            localStorage.setItem('mutt_cart', JSON.stringify(carrinho));
            renderCarrinho();
        }

        function finalizarPedido() {
            if(carrinho.length === 0) return alert("BAG VAZIA");
            if(!document.getElementById('estado').value) return alert("INFORME O ESTADO PARA O FRETE");

            const metodo = document.querySelector('input[name="pay"]:checked').value;
            window.location.href = metodo === 'pix' ? "pagamento-pix.html" : "pagamento-cartao.html";
        }

        window.onload = renderCarrinho;
    </script>
</body>
</html>
